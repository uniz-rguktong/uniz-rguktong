# üèóÔ∏è UniZ Microservices Architecture

Detailed architectural overview of the UniZ platform, including service interaction, data flow, and deployment infrastructure.

## üìä System Architecture Diagram

```mermaid
graph TD
    subgraph Clients
        PC[Web Browser]
        MB[Mobile App]
    end

    subgraph "Routing Layer (Vercel Edge)"
        GW[uniz-production-gateway]
    end

    subgraph "Microservices (Vercel Serverless)"
        AUTH[Auth Service]
        USER[User Service]
        PASS[Outpass Service]
        CRON[Cron Service]
        NOTIF[Notification Service]
    end

    subgraph "Data & Cache Layer"
        NEON[(Neon PostgreSQL)]
        REDIS[(Upstash Redis)]
    end

    %% Client Interactions
    PC --> GW
    MB --> GW

    %% Gateway Routing
    GW -- /api/v1/auth --> AUTH
    GW -- /api/v1/profile --> USER
    GW -- /api/v1/requests --> PASS
    GW -- /api/v1/cron --> CRON
    GW -- /api/v1/notifications --> NOTIF

    %% Database Schemas
    AUTH -- "auth schema" --> NEON
    USER -- "users schema" --> NEON
    PASS -- "outpass schema" --> NEON
    CRON -- "maintenance" --> NEON

    %% Cache & Queue
    AUTH -- "Rate Limiting" --> REDIS
    NOTIF -- "Message Queue" --> REDIS
    
    %% Cross-Service (Internal)
    PASS -- "Triggers" --> NOTIF
    CRON -- "Triggers" --> NOTIF
```

## üöÄ Service Directory

| Service | Primary Responsibility | Database / Schema |
| :--- | :--- | :--- |
| **Auth Service** | Identity management, JWT generation, OTP verification | Neon / `auth` |
| **User Service** | Student profiles, Faculty records, Role management | Neon / `users` |
| **Outpass Service** | Outpass request workflow, Approval logic | Neon / `outpass` |
| **Cron Service** | Expiring old outpasses, Database maintenance | Neon (Shared) |
| **Notification Service** | Sending emails, Handling background job queues | Upstash Redis |
| **Shared Lib** | Common Zod schemas, Types, and Error codes | N/A (Inlined) |

## üõ†Ô∏è Technology Stack

- **Framework**: Node.js / Express.js / TypeScript
- **Database**: Neon (Serverless PostgreSQL)
- **ORM**: Prisma
- **Cache/Queue**: Upstash Redis / BullMQ
- **Hosting**: Vercel (Edge & Serverless)
- **API Gateway**: Vercel Rewrites (Low Latency)

## üì° Production Endpoints

- **Root Gateway**: `https://uniz-production-gateway.vercel.app/api/v1`
- **Frontend App**: `https://uniz-ten.vercel.app`

---

*Generated by UniZ Infra Automation*
